## 1、内存限制

32位有4G内存限制。这个32位是指32位的CPU还是32位的操作系统？

答案是，都是。内存限制，是操作系统和硬件（CPU，也许还有内存控制器）共同制约的。CPU对应的是寻址物理地址，而操作系统对应的是寻址逻辑地址。实际上用户在使用计算机时，进程所访问到的地址是逻辑地址，并不是真实的物理地址，这个逻辑地址是操作系统提供的，CPU在执行指令时需要先将指令的逻辑地址变换为物理地址才能对相应的存储单元进行数据的读取或者写入（注意逻辑地址和物理地址是一一对应的）。

32位CPU地址总线数目为32根（一根就能瞬时传递一个0或1，代表一位），所以一次能处理32位（即4字节）的数据，可寻址物理地址范围为2的32次方= 4GB；64位CPU地址总线数目一般采用的是36位或者40位，能够寻址的物理地址空间为64GB或者1T。

对于32位的windows操作系统，其逻辑地址编码采用的地址位数是32位的，那么操作系统所提供的逻辑地址寻址范围是4GB。同理，64位逻辑地址寻址范围是1TB。

但是，在intel x86架构下，采用的是内存映射技术(Memory-Mapped I/O, MMIO)，也就说将4GB逻辑地址中一部分要划分出来与BIOS ROM、CPU寄存器、I/O设备这些部件的物理地址进行映射，那么逻辑地址中能够与内存条的物理地址进行映射的空间肯定没有4GB了，看下面这幅图就明白了：

![这里写图片描述](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0f2f3bde28f34764bf131bd36db13943~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp)

#### 对于32位CPU，只能安装32位操作系统；64位CPU，既可以安装32位操作系统，也可以安装64位操作系统。如果64位CPU装32操作系统的话，由上述可知，也只能至多应用4GB的内存，太浪费了。64位操作系统只能安装在64位CPU的服务器上。

链接：https://juejin.cn/post/6955400207513157643



## 2、内存分类

### 存储器的分类

存储器的分类是一门比较有意思的事情。存储器这个部件经过了几十年的发展，已经变得非常复杂了，从最开始的集成电路，到后面的磁带、光盘、磁盘等等，所以，存储器的分类也是比较复杂的。一般存储器可以按照容量、介质、存取方式、作用等来进行分类，但是比较重要的还是后面两种。

#### 按照存取方式分类

- 存取时间与物理地址无关（随机访问）
  - 随机存储器（RAM），可读可写随机存储器还可以分成动态的和静态的，动态的是采用电容保存电荷的原理实现的，静态的则是通过触发器或者说是电路方式实现的，这部分内容后面会详细说明。
  - 只读存储器（ROM），只读，一般用作储存系统信息，因为系统信息一般是不能让用户修改的，所以只读的最好，一般喜欢刷机的同学可能会有更深的理解，所谓的ROM包嘛。
- 存取时间与物理地址有关（串行访问）
  - 顺序存取：磁带，这没什么好说的，听过磁带的肯定清楚，如果你想要找到某首特定的歌，需要不停地倒带。
  - 直接存取：磁盘，一般访问磁盘是通过给出的地址，访问磁盘上面的对应位置，从而实现数据的读取。

#### 通过作用分类

- 主存 所谓主存，就是之前讲的，内存条之类的，CPU主要利用的存储器。
- FlashMemory 闪速存储器，能够在不加电的情况下能长期保持存储的信息。因为主存中的信息在断电以后就无法恢复了，所以闪速存储器很有意义。
- 辅存：辅存就是辅助存储器，作为扩展存储资源，就是磁盘之类的大容量的存储器，可以辅助计算机读写数据。
- 高速缓冲存储器（Cache） 高速缓冲存储器是存在于主存与CPU之间的一级存储器， 由静态存储芯片(SRAM)组成，容量比较小但速度比主存高得多， 接近于CPU的速度。存放由主存调入的指令与数据块。**实际上，CPU的速度要比所有存储器的速度快上万甚至十几万倍，这就造成了CPU需要等待存储器送来的数据。为了实现CPU和存储器之间的速度匹配，所以才出现了高速缓冲存储器。**

#### 存储器的层次结构

存储器的层次结构是一个金字塔形状。从上到下依次是寄存器、缓存、主存、磁盘、磁带等。寄存器一般存在于CPU内部，寄存器在第一篇文章中已经介绍过，剩下的就是这一节介绍的。

- 对于金字塔的解释 这个金字塔看似简单，但实际上包含的信息很多。最重要也是最著名的，就是“三个特性之间的关系”。
  - 速度：由上到下，由高到低
  - 价格：由上到下，由高到低
  - 容量：由上到下，由低到高

这里还有一个十分重要的概念：存储体系（Memory System）。存储层次结构分成了两种，一种是**缓存-主存结构**，另外一种是**主存-辅存结构**。

缓存-主存层次主要是用来解决CPU的速度和主存速度不匹配的问题，刚刚讲过，即便是内存条这样的高速设备，速度和CPU依然不在一个数量级上，所以需要这样一个层次来解决这个问题。而缓存，就是上面说的Cache。 主存-辅存结构主要是解决容量问题，从金字塔的结构中，其实我们就能够明白，为什么到今天，内存条的价格为何会如此之高，一条DDR4 8G内存，就能够达到七八百RMB的样子，而一块1T的硬盘，也不过四百左右。
转载from链接：https://juejin.cn/post/6844903661596852238
